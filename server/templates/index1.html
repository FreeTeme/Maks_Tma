<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Dashboard</title>
    <link rel="stylesheet" href="../static/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header class="header" style="display: flex; justify-content: space-between; align-items: center; padding: 10px;" onclick="window.href.location='/wallet'">
        <!-- Колокольчик -->
        <i class="fa-solid fa-wallet wallet-icon" id="notificationBell" style="font-size: 24px; color: #ffffff; cursor: pointer;"></i>

        <!-- Всплывающее окно для уведомлений -->
        <div class="notifications-popup" id="notificationsPopup">
            <div class="popup-content">
                <!-- <i class="fa-solid fa-bell-slash" style="font-size: 36px; color: #4c8cff; margin-bottom: 10px;"></i> -->
                <p>Click on the button to proceed to purchase</p>
                <button class="close-popup" id="closePopup" onclick="window.location.href='/wallet'">Go to buy</button>
            </div>
        </div>

        <!-- Баланс убран -->
        <!-- Кнопка меню -->
        <div class="menu-toggle" id="menuToggle" style="margin-top: -4%;">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <!-- Панель выбора режима торговли -->
    <div class="trading-mode-panel" id="tradingModePanel">
        <div style="display: flex; align-items: center;">
            <span style="justify-content: center;">About me</span>
        </div>
        <span class="arrow">▼</span>
    </div>

    <!-- Выдвижной блок для выбора режима -->
    <div class="trading-options-block" id="tradingOptionsBlock">
        <p id="usernameText">
            <i class="fa-solid fa-user" style="color: #4c8cff;"></i> My UserName: <span id="username">{{ username }}</span>
        </p>
        <p id="userIdText">
            <i class="fa-solid fa-fingerprint" style="color: #4c8cff;"></i> My ID: <span id="user_id">{{ user_id }}</span>
        </p>
        <button class="close-button" id="closeButton">Close</button>
    </div>

    <!-- Tab Navigation -->
    <div class="tabs">
        <button class="tab active" data-tab="crypto">PATTERNS</button>
        <button class="tab" data-tab="nfts">MINING</button>
        <button class="tab" data-tab="defi">SOCIAL</button>
    </div>

    <!-- Вкладка TRADING -->
    <div class="tab-content active" id="crypto-content">
        <div class="center-wrapper">
            <div class="crypto-buttons">
                <div class="crypto-btn1" onclick="window.location.href='/staking'">
                    <div class="crypto-info">
                        <i class="fa-solid fa-circle-dollar-to-slot" style="font-size: 40px;"></i>
                        <br><br>
                        <h3>Staking</h3>
                    </div>
                </div>
                <div class="crypto-btn2" onclick="window.location.href='/pattern'">
                    <div class="crypto-info">
                        <i class="fa-solid fa-chart-simple" style="font-size: 40px;"></i>
                        <br><br>
                        <h3>Pattern analysis</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Вкладка MINING -->
    <div class="tab-content" id="nfts-content" style="margin-top: 50%;">
        <button id="earnButton" class="earn-button">
            <div class="progress-bar" id="progressBar"></div>
            <span id="buttonText">Click to Earn</span>
        </button>
    </div>

    <!-- Вкладка SOCIAL -->
    <div class="tab-content" id="defi-content">
        <div class="defi-buttons" id="posts-container">
            {% for post in posts %}
            <div class="defi-btn social-card" 
                 data-link="{{ post[2] }}"
                 data-bonus="{{ post[3] }}"
                 data-post-id="{{ post[4] }}"      
                 style="cursor: pointer; position: relative;">
                <img src="{% if 'https://www.youtube.com' in post[2] %}../static/img/yootube.png {% elif 't.me' in post[2] %}../static/img/tg.webp{% else %}../static/img/m.jpg{% endif %}" 
                     alt="Defi Icon" 
                     class="defi-icon">
                <div class="defi-info">
                    <h3>{{ post[0] }}</h3>
                    <hr />
                    <p class="description">{{ post[1] }}</p>
                    <p class="price"><i class="fa-solid fa-coins"></i>{{ post[3] }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item"><i class="fa-solid fa-house" id="home-icon"></i></div>
        <div class="nav-item" id="open-chart"><i class="fa-solid fa-chart-line"></i></div>
        <div class="nav-item" id="open-search" onclick="location.href='graf'"><i class="fa-solid fa-star"></i></div>
        <div class="nav-item" id="folow" onclick="location.href='chat'"><i class="fa-regular fa-envelope"></i></div>
    </nav>

    <!-- Модальное окно -->
    <div class="modal" id="featureModal">
        <div class="modal-content">
            <i class="fa-solid fa-dollar-sign" style="font-size: 36px; color: #4c8cff; margin-bottom: 10px;"></i>
            <p id="modalText">Only premium user</p>
            <button class="close-modal" id="closeFeatureModal">close</button>
        </div>
    </div>

    <!-- Side Menu -->
    <div class="side-menu" id="sideMenu">
        <div class="menu-header">
            <div class="menu-title">
                <i class="fas fa-cog"></i>
                Menu
            </div>
            <button class="close-menu" id="closeMenu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="menu-item" onclick="location.href='/graf'">
            <i class="fas fa-users"></i>
            <span>Referral Program</span>
        </div>
        <div class="menu-item" onclick="location.href='/chat'">
            <i class="fas fa-question-circle"></i>
            <span>Help Center</span>
        </div>
        <div class="menu-item" id="bitryLink">
            <i class="fas fa-code"></i>
            <span>BiTry Studio</span>
        </div>
        <div class="menu-item" onclick="location.href='/logout'">
            <i class="fas fa-sign-out-alt"></i>
            <span>Выйти</span>
        </div>
        <div class="menu-item" id="adminPanel" onclick="location.href='/admin/logs'" style="display: none;">
            <i class="fas fa-shield-alt"></i>
            <span>Админ панель</span>
        </div>
    </div>

    <!-- Модальное окно для криптовалют -->
    <div id="modalc" class="modalc">
        <div class="modal-contentc" id="modalContentc">
            <span class="close">×</span>
            <input type="text" id="searchInput" placeholder="Поиск криптовалюты..." style="margin-right: 55%;">
            <div id="cryptoList" class="crypto-list"></div>
            <p id="noResults" style="display: none; color: red;">Монета не найдена</p>
        </div>
    </div>

    <script src="../static/script.js"></script>
</body>
</html>
<script>
    // Функция обновления баланса убрана

// Обработчик клика по карточке Social
async function handleSocialCardClick(event) {
    event.preventDefault();
    const card = event.currentTarget;
    const link = card.dataset.link;
    const bonus = parseInt(card.dataset.bonus) || 0;
    const postId = card.dataset.postId;

    if (card.classList.contains('completed-task')) {
        window.open(link, '_blank');
        return;
    }

    const loadingOverlay = document.createElement('div');
    loadingOverlay.className = 'loading-overlay';
    loadingOverlay.innerHTML = '<div class="loading-spinner"></div>';
    card.appendChild(loadingOverlay);
    card.style.pointerEvents = 'none';

    try {
        window.open(link, '_blank');
        await new Promise(resolve => setTimeout(resolve, 10000));

        const response = await fetch('/complete_social_task', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ 
                bonus: bonus,
                post_id: postId 
            }),
            credentials: 'include'
        });

        if (!response.ok) throw new Error('Network error');

        const data = await response.json();
        if (data.success) {
            loadingOverlay.remove();
            card.classList.add('completed-task');

            const bonusEl = document.createElement('div');
            bonusEl.className = 'bonus-animation';
            bonusEl.textContent = `+${bonus}`;
            card.appendChild(bonusEl);
            setTimeout(() => bonusEl.remove(), 1000);

            // updateBalanceDisplay(bonus); // Убрано

            setTimeout(() => {
                card.style.transition = 'opacity 0.3s';
                card.style.opacity = '0';
                setTimeout(() => card.remove(), 300);
            }, 1500);
        } else {
            throw new Error(data.message || 'Failed to complete task');
        }
    } catch (error) {
        console.error('Error:', error);
        loadingOverlay.remove();
        card.style.pointerEvents = 'auto';
        alert('Error: ' + error.message);
    }
}

// Проверка выполненных заданий
async function checkCompletedTasks() {
    try {
        const response = await fetch('/get_completed_tasks', {
            credentials: 'include'
        });

        if (response.ok) {
            const data = await response.json();
            if (data.completed_tasks) {
                data.completed_tasks.forEach(taskId => {
                    const card = document.querySelector(`.social-card[data-post-id="${taskId}"]`);
                    if (card) {
                        card.remove(); // Удаляем карточку
                    }
                });
            }
        }
    } catch (error) {
        console.error('Error checking completed tasks:', error);
    }
}

// Инициализация
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll('.social-card').forEach(card => {
        card.addEventListener('click', handleSocialCardClick);
    });
    checkCompletedTasks();
    
    // Показываем админ панель только админам
    fetch('/api/check-admin')
        .then(response => response.json())
        .then(data => {
            if (data.is_admin) {
                document.getElementById('adminPanel').style.display = 'flex';
            }
        })
        .catch(error => console.error('Ошибка проверки роли:', error));

    // Инициализация майнинга
    initMiningSection();

    // Уведомления
    const bellIcon = document.querySelector("#notificationBell");
    const notificationsPopup = document.getElementById("notificationsPopup");
    const closePopupButton = document.getElementById("closePopup");

    bellIcon.addEventListener("click", () => {
        notificationsPopup.style.display = "flex";
    });

    closePopupButton.addEventListener("click", () => {
        notificationsPopup.style.display = "none";
    });

    notificationsPopup.addEventListener("click", (event) => {
        if (event.target === notificationsPopup) {
            notificationsPopup.style.display = "none";
        }
    });

    // Меню
    const menuToggle = document.getElementById('menuToggle');
    const sideMenu = document.getElementById('sideMenu');
    const closeMenu = document.getElementById('closeMenu');

    menuToggle.addEventListener('click', () => {
        sideMenu.classList.add('show');
    });

    closeMenu.addEventListener('click', () => {
        sideMenu.classList.remove('show');
    });

    // Модальное окно
    const featureButtons = document.querySelectorAll('.crypto-btn2');
    const featureModal = document.getElementById('featureModal');
    const closeFeatureModal = document.getElementById('closeFeatureModal');
    const modalText = document.getElementById('modalText');
    const dollarIcon = featureModal.querySelector('.fa-dollar-sign');

    featureButtons.forEach(button => {
        button.addEventListener('click', () => {
            const buttonText = button.querySelector('h3').textContent;
            if (buttonText === "Self Trading") {
                return;
            } else {
                dollarIcon.style.display = 'none';
                modalText.innerHTML = `
                    <p style="font-size: 45px;"><i class="fa-solid fa-money-bill-wave"></i></p>
                    <p style="width: 250px;">Premium account users only</p>
                `;
            }
            featureModal.style.display = 'flex';
        });
    });

    closeFeatureModal.addEventListener('click', () => {
        featureModal.style.display = 'none';
    });

    window.addEventListener('click', (event) => {
        if (event.target === featureModal) {
            featureModal.style.display = 'none';
        }
    });

    // Вкладки
    const tabs = document.querySelectorAll(".tab");
    const tabContents = document.querySelectorAll(".tab-content");

    if (tabs.length > 0 && tabContents.length > 0) {
        tabs[0].classList.add("active");
        tabContents[0].classList.add("active");
    }

    tabs.forEach(tab => {
        tab.addEventListener("click", () => {
            tabs.forEach(t => t.classList.remove("active"));
            tabContents.forEach(content => content.classList.remove("active"));

            tab.classList.add("active");
            const activeTabContent = document.getElementById(`${tab.dataset.tab}-content`);
            if (activeTabContent) {
                activeTabContent.classList.add("active");
            }
        });
    });

    // BiTry Studio
    document.getElementById('bitryLink').addEventListener('click', function () {
        window.open('https://t.me/ITtbcstudio', '_blank');
    });
});

// Mining Section
function initMiningSection() {
    const button = document.getElementById("earnButton");
    const buttonText = document.getElementById("buttonText");
    const progressBar = document.getElementById("progressBar");
    let clicks = 0;
    let maxClicks;
    let timer;

    checkActiveMiningTimer().then(isActive => {
        if (!isActive) {
            resetButton();
        }
    });

    function resetButton() {
        clicks = 0;
        maxClicks = Math.floor(Math.random() * 9) + 10;
        progressBar.style.width = "0%";
        button.classList.remove("disabled");
        buttonText.textContent = "Click to Earn";
        localStorage.removeItem('miningEndTime');
        clearMiningTimerOnServer();
    }

    button.addEventListener("click", async () => {
        if (button.classList.contains("disabled")) return;

        clicks++;
        progressBar.style.width = `${(clicks / maxClicks) * 100}%`;

        const messages = ["more", "few", "almost"];
        if (clicks < maxClicks) {
            buttonText.textContent = messages[Math.floor(Math.random() * messages.length)];
        }

        if (clicks >= maxClicks) {
            button.classList.add("disabled");
            buttonText.textContent = "10";
            await startTimer();
            dropCoins();
            showBonusText();
        }
    });

    async function checkActiveMiningTimer() {
    try {
        const response = await fetch('/api/get_mining_timer');
        const data = await response.json();

        if (data.success && data.end_time) {
            const endTime = parseInt(data.end_time);
            const now = Math.floor(Date.now() / 1000);
            let timeLeft = endTime - now;

            // УБЕРИТЕ умножение на 2, оно некорректно
            // timeLeft = timeLeft * 2; // <- ЭТУ СТРОКУ НУЖНО УДАЛИТЬ

            if (timeLeft > 0) {
                localStorage.setItem('miningEndTime', endTime.toString());
                activateMiningTimer(timeLeft);
                return true;
            } else {
                await clearMiningTimerOnServer();
                localStorage.removeItem('miningEndTime');
            }
        }

        // Проверяем localStorage только если на сервере нет активного таймера
        const savedEndTime = localStorage.getItem('miningEndTime');
        if (savedEndTime) {
            const now = Math.floor(Date.now() / 1000);
            const timeLeft = parseInt(savedEndTime) - now;

            if (timeLeft > 0) {
                // Если в localStorage есть валидное время, синхронизируем с сервером
                await setMiningTimerOnServer(parseInt(savedEndTime));
                activateMiningTimer(timeLeft);
                return true;
            } else {
                localStorage.removeItem('miningEndTime');
            }
        }

        return false;
    } catch (error) {
        console.error('Error checking mining timer:', error);
        return false;
    }
}

    function activateMiningTimer(timeLeft) {
        button.classList.add("disabled");
        progressBar.style.width = "100%";
        startTimerWithTimeLeft(timeLeft);
    }

    async function startTimer() {
        const timeLeft = 24 * 60 * 60;
        const endTime = Math.floor(Date.now() / 1000) + timeLeft;

        await setMiningTimerOnServer(endTime);
        localStorage.setItem('miningEndTime', endTime.toString());

        startTimerWithTimeLeft(timeLeft);
    }

    function startTimerWithTimeLeft(timeLeft) {
        clearInterval(timer);

        timer = setInterval(() => {
            timeLeft--;

            const hours = Math.floor(timeLeft / 3600).toString().padStart(2, '0');
            const minutes = Math.floor((timeLeft % 3600) / 60).toString().padStart(2, '0');
            const seconds = (timeLeft % 60).toString().padStart(2, '0');

            buttonText.textContent = `${hours}:${minutes}:${seconds}`;

            if (timeLeft <= 0) {
                clearInterval(timer);
                resetButton();
            }
        }, 1000);
    }

    async function setMiningTimerOnServer(endTime) {
        try {
            const response = await fetch('/api/set_mining_timer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ end_time: endTime })
            });
            return await response.json();
        } catch (error) {
            console.error('Error setting mining timer:', error);
            return { success: false };
        }
    }

    async function clearMiningTimerOnServer() {
        try {
            const response = await fetch('/api/clear_mining_timer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            });
            return await response.json();
        } catch (error) {
            console.error('Error clearing mining timer:', error);
            return { success: false };
        }
    }

    function dropCoins() {
        for (let i = 0; i < 9; i++) {
            setTimeout(() => {
                const coin = document.createElement("div");
                coin.classList.add("coin");
                coin.style.left = Math.random() * window.innerWidth + "px";
                document.body.appendChild(coin);
                setTimeout(() => coin.remove(), 1000);
            }, i * 200);
        }
    }

    function showBonusText() {
        const bonusText = document.createElement("div");
        bonusText.classList.add("bonus-text");
        bonusText.textContent = "20 coins";
        document.body.appendChild(bonusText);

        fetch('/add_bonus', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            credentials: "same-origin"
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // updateBalanceDisplay(20); // Убрано
            }
        })
        .catch(error => console.error('Error:', error));

        setTimeout(() => bonusText.remove(), 5000);
    }
}

// Crypto Modal Functions
const cryptocurrencies = [
    { name: 'Bitcoin', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/1.png' },
    { name: 'Ethereum', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png' },
    { name: 'XRP', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/52.png' },
    { name: 'Tether', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/825.png' },
    { name: 'Solana', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/5426.png' },
    { name: 'TRON', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/1958.png' },
    { name: 'Dogecoin', logo: 'https://s2.coinmarketcap.com/static/img/coins/64x64/74.png' }
];

const exchanges = [
    { name: 'Kraken', staking: '5.2%' },
    { name: 'MEXC', staking: '4.0%' },
    { name: 'Bitget', staking: '4.0%' },
];

function resetModal() {
    const modalContent = document.getElementById('modalContentc');
    modalContent.innerHTML = `
        <span class="close" onclick="closeModal()">×</span>
        <input type="text" id="searchInput" placeholder="Поиск криптовалюты..." style="margin-right: 55%;">
        <div id="cryptoList" class="crypto-list"></div>
        <p id="noResults" style="display: none; color: red;">Монета не найдена</p>
    `;

    const searchInput = document.getElementById('searchInput');
    searchInput.oninput = function () {
        const query = searchInput.value.toLowerCase();
        const filteredCryptos = cryptocurrencies.filter(crypto =>
            crypto.name.toLowerCase().includes(query)
        );
        if (filteredCryptos.length > 0) {
            displayCryptocurrencies(filteredCryptos);
            document.getElementById('noResults').style.display = 'none';
        } else {
            document.getElementById('cryptoList').innerHTML = '';
            document.getElementById('noResults').style.display = 'block';
        }
    };

    displayCryptocurrencies(cryptocurrencies);
}

function displayCryptocurrencies(cryptoArray) {
    const cryptoList = document.getElementById('cryptoList');
    cryptoList.innerHTML = '';
    cryptoArray.forEach(crypto => {
        const item = document.createElement('div');
        item.className = 'crypto-item';
        item.innerHTML = `
            <img src="${crypto.logo}" alt="${crypto.name} logo">
            <div class="crypto-name">${crypto.name}</div>
        `;
        item.onclick = () => showCryptoDetails(crypto);
        cryptoList.appendChild(item);
    });
}

function showCryptoDetails(crypto) {
    const modalContent = document.getElementById('modalContentc');
    modalContent.innerHTML = `
        <span class="close" onclick="closeModal()">×</span>
        <h2>${crypto.name}</h2>
        <img src="${crypto.logo}" alt="${crypto.name} logo" width="64">
        <div id="exchangeList" class="exchange-list"></div>
        <button class="back-button" onclick="resetModal()">Назад</button>
    `;
    displayExchanges();
}

function displayExchanges() {
    const exchangeList = document.getElementById('exchangeList');
    exchangeList.innerHTML = '';
    exchanges.forEach(exchange => {
        const item = document.createElement('div');
        item.className = 'exchange-item';
        item.innerHTML = `
            <div class="exchange-name">${exchange.name}</div>
            <div class="staking-rate">${exchange.staking}</div>
        `;
        item.onclick = () => selectExchange(exchange);
        exchangeList.appendChild(item);
    });
}

function selectExchange(exchange) {
    const modalContent = document.getElementById('modalContentc');
    const urlParams = new URLSearchParams({
        exchange: exchange.name,
        staking: exchange.staking
    }).toString();

    modalContent.innerHTML = `
        <span class="close" onclick="closeModal()">×</span>
        <h2>Вы выбрали - ${exchange.name}</h2>
        <p class="staking-rate">Ставка: ${exchange.staking}</p>
        <button class="back-btn" onclick="location.href='instruction.html?${urlParams}'">
            Перейти к инструкции
        </button>
    `;
}

const modal = document.getElementById('modalc');
const openModalBtn = document.getElementById('openModalBtn');

if (openModalBtn) {
    openModalBtn.onclick = function () {
        modal.style.display = 'block';
        resetModal();
    };
}

function closeModal() {
    modal.style.display = 'none';
}

window.onclick = function (event) {
    if (event.target == modal) {
        closeModal();
    }
};
</script>

<style>
 /* Prevent screen rotation */
 @media only screen and (orientation: landscape) {
        body {
            transform: rotate(90deg);
            transform-origin: center center;
            overflow: hidden;
            height: 100vh;
        }
    }


    /* Стили для всплывающего окна */
.notifications-popup {
    display: none; /* Скрыто по умолчанию */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); /* Полупрозрачный фон */
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.popup-content {
    background-color: #1e1e1e;
    color: #fff;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
}

.popup-content p {
    font-size: 18px;
    margin: 10px 0;
}

.close-popup {
    background-color: #4c8cff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    transition: background-color 0.3s;
}



.close-popup:hover {
    background-color: #357ae8;
}

.crypto-buttons {
    display: flex;
    flex-direction: column; /* Располагаем кнопки в колонку */
    align-items: center;    /* Центрируем кнопки */
    margin-top: 30px;
}

.crypto-btn {
    background-color: #000;
    color: #fff;
    border: 2px solid #4c8cff;
    border-radius: 30px;
    padding: 20px;
   width: 200px;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    gap: 10px;
    transition: background-color 0.3s, color 0.3s;
    margin-bottom: 20px; /* Отступ между кнопками */
}

.crypto-btn1 {
    background-color: #000;
    color: #fff;
    border: 2px solid #4c8cff;
    font-size: 20px;
    border-radius: 30px;
    padding: 20px;
   width: 45%;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    gap: 10px;
    transition: background-color 0.3s, color 0.3s;
    margin-bottom: 20px; /* Отступ между кнопками */
}
.crypto-btn2 {
    background-color: #000;
    color: #fff;
    border: 2px solid #4c8cff;
    font-size: 20px;
    border-radius: 30px;
    padding: 20px;
   width: 45%;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    gap: 10px;
    transition: background-color 0.3s, color 0.3s;
    margin-bottom: 20px; /* Отступ между кнопками */
}

.crypto-btn:hover {
    background-color: #4c8cff;
    color: #fff;
}


.action-button {
            background-color: #007bff;
            width: 160px;
            height: 60px;
            color: white;
        }

        .action-button:hover {
            background-color: #0056b3;
        }

        #selectedExchange {
            margin-top: 20px;
        }

        .earn-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70vw;
    height: 70vw;
    max-width: 250px;
    max-height: 250px;
    border-radius: 50%;
    background: #1e1e1e;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 4vw;
    font-weight: bold;
    color: white;
    border: 3px solid #4c8cff;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

/* Адаптация для маленьких экранов */
@media screen and (max-width: 480px) {
    .earn-button {
        width: 60vw;
        height: 60vw;
        font-size: 5vw;
        top: 40%;
    }
    
    /* Для iPhone 5/SE */
    @media (max-height: 568px) {
        .earn-button {
            top: 35%;
            width: 55vw;
            height: 55vw;
        }
    }
}

/* Портретная ориентация */
@media (orientation: portrait) {
    .earn-button {
        width: 65vw;
        height: 65vw;
    }
}

/* Ландшафтная ориентация */
@media (orientation: landscape) {
    .earn-button {
        width: 40vh;
        height: 40vh;
        font-size: 3vh;
    }
}

.progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: rgba(76, 140, 255, 0.5);
    width: 0%;
    transition: width 0.2s;
}


/* .earn-button {
    position: absolute;
    top: 250px;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 250px;
    height: 250px;
    border-radius: 50%;
    background: #1e1e1e;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 25px;
    font-weight: bold;
    color: white;
    border: 3px solid #4c8cff;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: rgba(76, 140, 255, 0.5);
    width: 0%;
    transition: width 0.2s;
  }
  .earn-button.disabled {
    filter: grayscale(100%);
    cursor: not-allowed;
  } */









  .back-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, #0066CC, #007BFF);
            border: none;
            border-radius: 25px;
            color: #fff;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .back-btn:hover {
            background: linear-gradient(45deg, #0052a3, #0066CC);
        }













  .coin {
    position: absolute;
    width: 30px;
    height: 30px;
    background: gold;
    border-radius: 50%;
    top: -50px;
    animation: fall 1s linear forwards;
  }
  @keyframes fall {
    0% { transform: translateY(0); }
    100% { transform: translateY(100vh); }
  }



  .bonus-text {
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    font-weight: bold;
    color: #4c8cff;
    opacity: 0;
    animation: moveUp 3s forwards;
  }
  @keyframes moveUp {
    0% {
      transform: translate(-50%, 0);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50px);
      opacity: 0;
    }
  }




  /* Основной стиль для контейнера */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #000; /* Убираем градиент */
    color: #fff;
    min-height: 100vh; /* Обеспечивает заполнение всей высоты экрана */
    display: flex;
    flex-direction: column;
    max-width: 100vh;
}

/* Контейнер */
.container {
    flex: 1; /* Контейнер занимает оставшееся пространство */
    padding: 20px;
    position: relative;
}

/* Стили для заголовка */
.header {
    position: relative;
    text-align: center;
    display: flex;
    justify-content: space-between; /* Равномерное распределение содержимого */
    align-items: center; /* Выравнивание по центру по вертикали */
}

.balance {
    flex-grow: 1; /* Занимает доступное пространство */
}

.balance h1 {
    font-size: 28px;
    margin: 10px 0;
}


 /* Side Menu */
 .side-menu {
      position: fixed;
      top: 0;
      left: -300px;
      width: 280px;
      height: 100%;
      background: rgba(20, 20, 30, 0.98);
      backdrop-filter: blur(20px);
      padding: 20px;
      transition: all 0.4s cubic-bezier(0.65, 0, 0.35, 1);
      z-index: 1000;
      border-right: 1px solid rgba(108, 92, 231, 0.2);
      overflow-y: auto;
    }

    .side-menu.show {
      left: 0;
    }

    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(108, 92, 231, 0.2);
    }

    .menu-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--light);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .close-menu {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .close-menu:hover {
      color: var(--primary);
      transform: rotate(90deg);
    }

    .menu-item {
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      color: var(--light);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .menu-item:hover {
      background: rgba(108, 92, 231, 0.1);
      transform: translateX(5px);
    }

    .menu-item i {
      width: 24px;
      text-align: center;
      color: var(--primary);
    }

    /* Menu Toggle Button */
    .menu-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
      background: rgba(40, 40, 50, 0.8);
      border: 1px solid rgba(108, 92, 231, 0.3);
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .menu-toggle:hover {
      background: rgba(108, 92, 231, 0.2);
      transform: rotate(90deg);
    }

    .menu-toggle i {
      color: var(--light);
      font-size: 20px;
    }







    .bonus-animation {
    position: absolute;
    top: -15px;
    right: -10px;
    background: #4c8cff;
    color: white;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    animation: floatUp 0.8s ease-out;
    z-index: 100;
}

@keyframes floatUp {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-25px); opacity: 0; }
}


/* .hamburger-menu {
    width: 25px;
    height: 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    cursor: pointer; 
}

.hamburger-menu span {
    display: block;
    width: 100%;
    height: 3px;
    background-color: #fff;
    border-radius: 2px;
} */

/* Стили для кнопок действий */
.actions {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
}

.actions button {
    background-color: #4c8cff;
    color: #fff;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
}

/* Стили для вкладок */
.tabs {
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    border-bottom: 1px solid #333;
    border-top: 3px solid #4c8cff;
}

.tabs .tab {
    background: none;
    border: none;
    color: #777;
    font-size: 20px;
    padding: 10px;
    cursor: pointer;
}

.tabs .tab.active {
    color: #4c8cff;
    border-bottom: 2px solid #4c8cff;
}

/* Стили для содержимого вкладок */
.tab-content {
    display: none;
    padding: 15px;
   
}

.tab-content.active {
    display: block;
}

/* Стили для бокового меню */
.side-menu {
    position: fixed;
    top: 0;
    left: -100%;
    width: 250px;
    height: 100%;
    background-color: #1a1a1a;
    color: #fff;
    padding: 20px;
    transition: left 0.3s;
    z-index: 100;
}

.side-menu .menu-content p {
    margin: 20px 0;
    cursor: pointer;
}

.side-menu.show {
    left: 0;
}

/* Стили для нижней навигации */

/* Стили для нижней навигации (фиксированная панель) */
 /* Стили для нижней навигации */
 .bottom-nav {
    display: flex;
    justify-content: space-around;
    align-items: center;
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 65px;
    background-color: #1e1e1e;
    border-top: 2px solid #4c8cff;
}

.nav-item {
    color: #4c8cff;
    font-size: 24px;
    cursor: pointer;
    transition: color 0.3s;
}

.nav-item.active {
    color: #ffffff;
}

.nav-item:hover {
    color: #ffffff;
}




/* Стили для кнопок в вкладке Crypto */
#crypto-content {
    max-height: calc(100vh - 200px); /* Вычитаем высоту панели и других элементов */
    overflow-y: auto; /* Включаем вертикальную прокрутку */
    padding: 15px;
    margin-bottom: 60px; /* Оставляем место для фиксированной нижней панели */
    justify-content: center; /* Центрируем содержимое по горизонтали */
    align-items: center; /* Центрируем содержимое по вертикали */
}
.crypto-buttons {
    display: flex;
    flex-direction: column; /* Располагаем кнопки вертикально */
    align-items: center;    /* Центрируем кнопки */
    margin-top: 30px;
}

.crypto-btn {
    background-color: #000; /* Цвет фона кнопки */
    color: #fff; /* Цвет текста */
    border: 2px solid #4c8cff; /* Цвет и стиль границы */
    border-radius: 20px; /* Скругление углов */
    width: 90%; /* Фиксированная ширина */
    max-width: 300px; /* Максимальная ширина */
    height: 80px; /* Фиксированная высота */
    text-align: center; /* Выравнивание текста по центру */
    display: flex;
    flex-direction: column; /* Расположение элементов внутри кнопки вертикально */
    justify-content: center; /* Центрируем элементы по вертикали */
    align-items: center; /* Центрируем элементы по горизонтали */
    cursor: pointer; /* Курсор для кликабельности */
    gap: 10px; /* Расстояние между элементами внутри кнопки */
    transition: background-color 0.3s, color 0.3s;
    margin-bottom: 20px; /* Отступ между кнопками */
}

.crypto-btn:hover {
    background-color: #4c8cff; /* Цвет фона при наведении */
    color: #fff; /* Цвет текста при наведении */
}

.crypto-btn h3 {
    margin: 0;
    font-size: 18px;
    font-weight: bold;
}

.crypto-btn p {
    margin: 0;
    font-size: 14px;
    color: #ccc; /* Цвет описания */
}





/* Стили для кнопок в разделе DeFi */
.defi-buttons {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 20px;
}

.defi-btn {
    background-color: #333; /* Темно-серый фон */
    color: #fff; /* Белый текст */
    border: 2px solid #4c8cff; /* Голубая обводка */
    border-radius: 30px; /* Овальная форма */
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.defi-btn:hover {
    background-color: #4c8cff; /* Голубой фон при наведении */
}

.defi-icon {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 50%;
}

.defi-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: left;
    width: 100%;
}

.defi-info h3 {
    font-size: 16px;
    font-weight: bold;
    margin: 0;
}

.defi-info hr {
    border: none;
    border-top: 1px solid #ccc;
    margin: 5px 0;
}

.description {
    font-size: 14px;
    margin: 5px 0;
}

.price {
    font-size: 20px;
    color: #4c8cff; /* Голубой цвет для цены */
    margin: 5px 0;
    margin-left: 80%;
}

/* Trading Mode Panel */
.trading-mode {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #333;
    color: #fff;
    padding: 10px;
    margin: 15px 0;
    border-radius: 5px;
    cursor: pointer;
}




 /* Основной стиль для панели выбора режима */
 .trading-mode-panel {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #2a2d3b;
    color: #fff;
    padding: 12px 20px;
    border-radius: 8px;
    margin: 10px 0;
    cursor: pointer;
    border: 1px solid #4c8cff;
    
}

/* Стиль для иконки и текста в панели */
.trading-mode-panel .icon {
    background-color: #4c8cff;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 8px;
}

.trading-mode-panel .arrow {
    font-size: 14px;
}

/* Блок, который появляется внизу экрана при выборе режима */
.trading-options-block {
    position: fixed;
    bottom: -100%; /* Скрыто внизу экрана */
    left: 0;
    width: 100%;
    background-color: #1e2130;
    padding: 20px;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
    border: 1px solid #4c8cff;
    transition: bottom 0.3s ease; /* Анимация выезда */
    z-index: 1000;
    width: 89%;
}

/* Заголовок блока */
.trading-options-block h3 {
    color: #fff;
    font-size: 18px;
    margin-bottom: 16px;
}

/* Стиль для каждого режима в блоке */
.option {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #333;
    cursor: pointer;
}

.option:last-child {
    border-bottom: none;
}

.option .icon {
    width: 28px;
    height: 28px;
    margin-right: 12px;
}

/* Стили для больших радиокнопок */
.option input[type="radio"] {
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #4c8cff;
    background-color: #333;
    margin-right: 12px;
    cursor: pointer;
}

.option input[type="radio"]:checked {
    background-color: #4c8cff;
}

/* Текст и описание опций */
.option-content {
    color: #ccc;
}

.option-title {
    font-size: 16px;
    color: #fff;
    margin-bottom: 4px;
}

.option-description {
    font-size: 14px;
}

/* Кнопка "Закрыть" */
.close-button {
    width: 100%;
    padding: 12px;
    background-color: #4c8cff;
    color: #fff;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 20px;
}

/* Показать блок внизу экрана */
.trading-options-block.show {
    bottom: 0; /* Поднимается наверх экрана */
}



#home-icon {
    color: #fff;
}


/* Медиазапросы для адаптивности */
@media screen and (max-width: 768px) {
    .crypto-btn {
        width: 31%;
    }

    .social .social-item {
        width: 35%;  /* 2 элемента в строке */
    }
}



/* Стили для модального окна */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  .modal-content {
    background-color: #1e1e1e;
    color: #fff;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
  }
  .close-modal {
    background-color: #4c8cff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    transition: background-color 0.3s;
  }
  .close-modal:hover {
    background-color: #357ae8;
  }
  /* Стили для изменения бургер-меню */
  .hamburger-menu.active span:nth-child(1) {
    transform: rotate(45deg);
    position: absolute;
    top: 50%;
  }
  .hamburger-menu.active span:nth-child(2) {
    opacity: 0;
  }
  .hamburger-menu.active span:nth-child(3) {
    transform: rotate(-45deg);
    position: absolute;
    top: 50%;
  }

  .hamburger-menu.cross i {
    font-size: 44px;
    color: #fff;
}






.bonus-text {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    font-weight: bold;
    color: #4c8cff;
    opacity: 0;
    animation: bonusFade 2s forwards;
    z-index: 1000;
}

@keyframes bonusFade {
    0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -150%) scale(1.5); }
}




.modalc {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-contentc {
            background-color: #1e1e1e;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            text-align: center;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover, .close:focus {
            color: white;
        }

        #searchInput {
            width: 95%;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 16px;
            background-color: #2a2a2a;
            color: #ffffff;
            border: 1px solid #444;
            border-radius: 5px;
        }

        .crypto-list, .exchange-list {
            max-height: 400px;
            overflow-y: auto;
            text-align: left;
        }

        .crypto-item, .exchange-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #444;
            cursor: pointer;
        }

        .crypto-item img, .exchange-item img {
            width: 32px;
            height: 32px;
            margin-right: 10px;
        }

        .crypto-item .crypto-name, .exchange-item .exchange-name {
            font-size: 18px;
            flex-grow: 1;
        }

        .crypto-item .crypto-price, .exchange-item .staking-rate {
            font-size: 14px;
            color: #bbb;
        }

        .back-button {
            margin-top: 20px;
            padding: 10px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }



        .hidden {
            opacity: 0;
            pointer-events: none;
        }

        .selected-exchange {
            font-size: 22px;
            font-weight: bold;
            margin-top: 20px;
        }

        .staking-rate-large {
            font-size: 18px;
            color: #bbb;
            margin-bottom: 20px;
        }

        .button-container {
            margin-top: 20px;
            display: none;
        }

        .account-button {
            padding: 10px;
            margin: 10px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }


/* soial */

.loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 30px;
            z-index: 10;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4c8cff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .bonus-animation {
            position: absolute;
            top: -15px;
            right: -10px;
            background: #4c8cff;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            animation: floatUp 0.8s ease-out;
            z-index: 100;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-25px); opacity: 0; }
        }
        
        .balance-update {
            animation: balanceBounce 0.5s ease;
        }
        
        @keyframes balanceBounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .completed-task {
            opacity: 0.5;
            pointer-events: none;
            position: relative;
        }
        
        .completed-task::after {
            content: "✓";
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4c8cff;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
</style>